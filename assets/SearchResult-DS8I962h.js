import{l as I,i as Z,m as ee,p as U,q as ae,s as te,v as le,x as se,j as L,y as A,z as re,A as M,k as t,B as $,C as O,R as _,D as ne,E as oe,G as ue,H as ie,I as ce,J as ve,K as me,L as he,O as pe,M as je,N as de,P as ye,Q as ge,S as fe,T}from"./app-Diq65XQm.js";const be=["/","/intro.html","/en/","/en/intro.html","/en/demo/","/en/demo/disable.html","/en/demo/encrypt.html","/en/demo/layout.html","/en/demo/markdown.html","/en/demo/page.html","/en/posts/cherry.html","/en/posts/dragonfruit.html","/en/posts/strawberry.html","/en/posts/tomato.html","/java/basis/bigdecimal.html","/java/basis/generics-and-wildcards.html","/java/basis/java-basic-questions-01.html","/java/basis/java-basic-questions-02.html","/java/basis/java-basic-questions-03.html","/java/basis/java-keyword-summary.html","/java/basis/proxy.html","/java/basis/reflection.html","/java/basis/serialization.html","/java/basis/spi.html","/java/basis/syntactic-sugar.html","/java/basis/unsafe.html","/java/basis/why-there-only-value-passing-in-java.html","/java/collection/arrayblockingqueue-source-code.html","/java/collection/arraylist-source-code.html","/java/collection/concurrent-hash-map-source-code.html","/java/collection/copyonwritearraylist-source-code.html","/java/collection/delayqueue-source-code.html","/java/collection/hashmap-source-code.html","/java/collection/java-collection-precautions-for-use.html","/java/collection/java-collection-questions-01.html","/java/collection/java-collection-questions-02.html","/java/collection/linkedhashmap-source-code.html","/java/collection/linkedlist-source-code.html","/java/concurrent/aqs.html","/java/concurrent/atomic-classes.html","/java/concurrent/completablefuture-intro.html","/java/concurrent/java-concurrent-collections.html","/java/concurrent/java-concurrent-questions-01.html","/java/concurrent/java-concurrent-questions-02.html","/java/concurrent/java-concurrent-questions-03.html","/java/concurrent/java-thread-pool-best-practices.html","/java/concurrent/java-thread-pool-summary.html","/java/concurrent/jmm.html","/java/concurrent/optimistic-lock-and-pessimistic-lock.html","/java/concurrent/reentrantlock.html","/java/concurrent/threadlocal.html","/java/concurrent/virtual-thread.html","/java/io/io-basis.html","/java/io/io-design-patterns.html","/java/io/io-model.html","/java/io/nio-basis.html","/java/jvm/class-file-structure.html","/java/jvm/class-loading-process.html","/java/jvm/classloader.html","/java/jvm/jdk-monitoring-and-troubleshooting-tools.html","/java/jvm/jvm-garbage-collection.html","/java/jvm/jvm-in-action.html","/java/jvm/jvm-intro.html","/java/jvm/jvm-parameters-intro.html","/java/jvm/memory-area.html","/java/new-features/java10.html","/java/new-features/java11.html","/java/new-features/java12-13.html","/java/new-features/java14-15.html","/java/new-features/java16.html","/java/new-features/java17.html","/java/new-features/java18.html","/java/new-features/java19.html","/java/new-features/java20.html","/java/new-features/java21.html","/java/new-features/java8-common-new-features.html","/java/new-features/java8-tutorial-translate.html","/java/new-features/java9.html","/en/posts/apple/1.html","/en/posts/apple/2.html","/en/posts/apple/3.html","/en/posts/apple/4.html","/en/posts/banana/1.html","/en/posts/banana/2.html","/en/posts/banana/3.html","/en/posts/banana/4.html","/404.html","/en/posts/","/java/basis/","/java/","/java/collection/","/java/concurrent/","/java/io/","/java/jvm/","/java/new-features/","/en/posts/apple/","/en/posts/banana/","/category/","/category/java/","/en/category/","/en/category/guide/","/en/category/cherry/","/en/category/dragon-fruit/","/en/category/fruit/","/en/category/strawberry/","/en/category/vegetable/","/en/category/apple/","/en/category/banana/","/tag/","/tag/java%E5%9F%BA%E7%A1%80/","/tag/java%E9%9B%86%E5%90%88/","/tag/java%E5%B9%B6%E5%8F%91/","/tag/java-io/","/tag/jvm/","/tag/java%E6%96%B0%E7%89%B9%E6%80%A7/","/en/tag/","/en/tag/disable/","/en/tag/encryption/","/en/tag/layout/","/en/tag/markdown/","/en/tag/page-config/","/en/tag/guide/","/en/tag/red/","/en/tag/small/","/en/tag/round/","/en/tag/big/","/en/tag/yellow/","/en/tag/curly/","/en/tag/long/","/article/","/en/article/","/star/","/en/star/","/timeline/","/en/timeline/"],we="SEARCH_PRO_QUERY_HISTORY",p=I(we,[]),ke=()=>{const{queryHistoryCount:l}=T,s=l>0;return{enabled:s,queryHistory:p,addQueryHistory:r=>{s&&(p.value.length<l?p.value=Array.from(new Set([r,...p.value])):p.value=Array.from(new Set([r,...p.value.slice(0,l-1)])))},removeQueryHistory:r=>{p.value=[...p.value.slice(0,r),...p.value.slice(r+1)]}}},B=l=>be[l.id]+("anchor"in l?`#${l.anchor}`:""),He="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:D}=T,j=I(He,[]),Re=()=>{const l=D>0;return{enabled:l,resultHistory:j,addResultHistory:s=>{if(l){const r={link:B(s),display:s.display};"header"in s&&(r.header=s.header),j.value.length<D?j.value=[r,...j.value]:j.value=[r,...j.value.slice(0,D-1)]}},removeResultHistory:s=>{j.value=[...j.value.slice(0,s),...j.value.slice(s+1)]}}},qe=l=>{const s=ce(),r=U(),Q=ve(),o=L(!1),y=me([]);return he(()=>{const{search:w,terminate:d}=pe(),k=()=>{y.value=[],o.value=!1},g=fe(m=>{o.value=!0,m?w(m,r.value,s.value).then(h=>{var H,f;return((f=(H=s.value).searchFilter)==null?void 0:f.call(H,h,m,r.value,Q.value))??h}).then(h=>{y.value=h,o.value=!1}).catch(h=>{console.error(h),k()}):k()},T.searchDelay);M([l,r],()=>g(l.value),{immediate:!0}),je(()=>{d()})}),{searching:o,results:y}};var xe=Z({name:"SearchResult",props:{query:{type:String,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:s}){const r=ee(),Q=U(),o=ae(te),{enabled:y,addQueryHistory:w,queryHistory:d,removeQueryHistory:k}=ke(),{enabled:g,resultHistory:m,addResultHistory:h,removeResultHistory:H}=Re(),f=y||g,x=le(l,"query"),{results:b,searching:z}=qe(x),n=se({isQuery:!0,index:0}),c=L(0),v=L(0),F=A(()=>f&&(d.value.length>0||m.value.length>0)),E=A(()=>b.value.length>0),S=A(()=>b.value[c.value]||null),Y=()=>{const{isQuery:e,index:a}=n;a===0?(n.isQuery=!e,n.index=e?m.value.length-1:d.value.length-1):n.index=a-1},G=()=>{const{isQuery:e,index:a}=n;a===(e?d.value.length-1:m.value.length-1)?(n.isQuery=!e,n.index=0):n.index=a+1},J=()=>{c.value=c.value>0?c.value-1:b.value.length-1,v.value=S.value.contents.length-1},K=()=>{c.value=c.value<b.value.length-1?c.value+1:0,v.value=0},N=()=>{v.value<S.value.contents.length-1?v.value+=1:K()},V=()=>{v.value>0?v.value-=1:J()},C=e=>e.map(a=>de(a)?a:t(a[0],a[1])),W=e=>{if(e.type==="customField"){const a=ye[e.index]||"$content",[u,q=""]=ge(a)?a[Q.value].split("$content"):a.split("$content");return e.display.map(i=>t("div",C([u,...i,q])))}return e.display.map(a=>t("div",C(a)))},R=()=>{c.value=0,v.value=0,s("updateQuery",""),s("close")};return re("keydown",e=>{if(l.isFocusing){if(E.value){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const a=S.value.contents[v.value];w(l.query),h(a),r.push(B(a)),R()}}else if(g){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:a}=n;n.isQuery?(s("updateQuery",d.value[a]),e.preventDefault()):(r.push(m.value[a].link),R())}}}}),M([c,v],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:x.value?!E.value:!F.value}],id:"search-pro-results"},x.value===""?f?F.value?[y?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},o.value.queryHistory),d.value.map((e,a)=>t("div",{class:["search-pro-result-item",{active:n.isQuery&&n.index===a}],onClick:()=>{s("updateQuery",e)}},[t($,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:O,onClick:u=>{u.preventDefault(),u.stopPropagation(),k(a)}})]))])):null,g?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},o.value.resultHistory),m.value.map((e,a)=>t(_,{to:e.link,class:["search-pro-result-item",{active:!n.isQuery&&n.index===a}],onClick:()=>{R()}},()=>[t($,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(u=>C(u)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:O,onClick:u=>{u.preventDefault(),u.stopPropagation(),H(a)}})]))])):null]:o.value.emptyHistory:o.value.emptyResult:z.value?t(ne,{hint:o.value.searching}):E.value?t("ul",{class:"search-pro-result-list"},b.value.map(({title:e,contents:a},u)=>{const q=c.value===u;return t("li",{class:["search-pro-result-list-item",{active:q}]},[t("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),a.map((i,X)=>{const P=q&&v.value===X;return t(_,{to:B(i),class:["search-pro-result-item",{active:P,"aria-selected":P}],onClick:()=>{w(l.query),h(i),R()}},()=>[i.type==="text"?null:t(i.type==="title"?oe:i.type==="heading"?ue:ie,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[i.type==="text"&&i.header?t("div",{class:"content-header"},i.header):null,t("div",W(i))])])})])})):o.value.emptyResult)}});export{xe as default};
